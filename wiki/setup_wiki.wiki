#summary how to setup SMW using shell script via SVN client
#labels Featured,Phase-Deploy

= Introduction =
We write several shell scripts (bash) to help users install SMW using SVN client. Such installation allows users to (i) install the latest version of wiki codes and extensions, and (ii) update the installation with the latest patches distributed via SVN.

=Prerequisites=
 * SVN client must be installed. the following code may help you install SVN client (if your linux support yum and you can log in as root).  
{{{
yum install subversion
}}}  

The following requirements are similar to [http://www.mediawiki.org/wiki/Installation the requirements by mediawiki installation]
 * mysql 4.0 or higher version has been installed and running. you should have enough privilege to create a database and grant privileges. That ensures that you can install a media wiki database.
 * apache web server (httpd) 2.0 or higher version has been installed and is running. the root directory is < WWW-ROOT >
 * PHP 5.0 or higher version has been installed. php-mysql, ... has been configured with apache web server.

note: we only support linux with bash scripts

= Installation =
== A. Prepare setup scripts==
*A1*. open a linux console, and create a directory for your wikis
{{{
mkdir <WWW-ROOT>/wiki
cd <WWW-ROOT>/wiki
}}}

*A2*. download all setup scripts (some depends on some others).
new installation
{{{
svn checkout http://smwbp.googlecode.com/svn/trunk/install
}}}
OR update existing installation
{{{
svn update install
}}}

*A3*. copy setup scripts and make them executable
{{{
cp install/*  .
chmod +x *.sh
}}}
hint: you may review the setup scripts at http://code.google.com/p/smwbp/source/browse/#svn/trunk/setup

== B. Install MediaWiki  (MW)==
*B1*. execute one setup script to install a wiki at < MY-WIKI-PATH > 
{{{
./setup-mw.sh install <MY-WIKI-PATH>
}}}
hint: you will see a sequence of shell command executed, they are essentially downloading the wiki codes from several Web hosts.

*B2*. install mediawiki following [http://www.mediawiki.org/wiki/Manual:Config_script MW setup instructions]. Typically you need to do the following:
{{{
bash# cd <MY-WIKI-PATH>
bash# chmod a+w config/
...goto your wiki url and use web interface to configure your wiki...
...it is recommended to set database charset to "MySQL 4.1/5.0 UTF-8"
mv config/LocalSettings.php .
}}}

*B3* append the following line to the end of LocalSettings.php
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.mw.php" );  #MW only
}}}


== C. Install Semantic MediaWiki  (SWM)==
*C1*. run script setup-smw.sh
{{{
./setup-smw.sh install <MY-WIKI-PATH>
}}}

*C2*. follow instructions from *B2*

*C3*. append the following line to the end of {{{LocalSettings.php}}}
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.mw.php" );  #MW only

require_once( "extensions/SMWBP/LocalSettings.smwbp.smw.php" );  #SMW only
enableSemantics("example.org");
}}}

*C4*. initialize SMW following [http://semantic-mediawiki.org/wiki/Help:Installation SMW setup instructions]. Typically you need to do the following:
{{{
login wiki with administrator account
follow the link "special pages" (you can see a link in the sidebar)
follow the link "Admin functions for Semantic MediaWiki"
make sure the wiki's database account has additional "create table", "alter table" and "drop table" privilege on your wiki database.
click the button "initialize or upgrade database" 
}}}
After a successful installation, you should see the following text at the bottom of screen
{{{
The storage engine was set up successfully.
Return to Special:SMWAdmin
}}}
note:
 * create table and drop table is required by SMW initialization; 
 * alter table is required by SMW+ initialization.

*C5*. (optional) append the following line to the end of {{{LocalSettings.php}}}
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.ext.php" );  #recommended MW ans SMW extensions
}}}

see also
 * http://semantic-mediawiki.org/wiki/Help:Configuration


== D. Install Semantic MediaWiki with Halo Extension (SWM+)==
*D1*. run script setup-smwplus.sh
{{{
./setup-smwplus.sh install <MY-WIKI-PATH>
}}}

*D2*. follow instructions from B2

*D3*. append the following line to the end of {{{LocalSettings.php}}}
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.mw.php" );  #MW only

require_once( "extensions/SMWBP/LocalSettings.smwbp.smw.php" );  #SMW only
enableSemantics("http://your.server.name", true);   # you need to update your.server.name with your server name

require_once( "extensions/SMWBP/LocalSettings.smwbp.smwplus.php" );  #SMW+ halo extension
enableSMWHalo();
}}}

*D4*. follow instructions from C4 (initialize SMWPLUS database)

*D5*. (optional) append the following line to the end of {{{LocalSettings.php}}}
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.ext.php" );  #recommended MW ans SMW extensions
}}}


note:
 * you may also check [http://smwforum.ontoprise.com/smwforum/index.php/Manual_SMW%2B_Installation SMW+ setup instructions]

== E. Install Semantic MediaWiki (SWM-RPI configuration)==
*E1*. run script setup-smwrpi.sh
{{{
./setup-smwrpi.sh install <MY-WIKI-PATH>
}}}

*E2*. follow instructions from B2

*E3*. append the following line to the end of {{{LocalSettings.php}}}
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.mw.php" );  #MW only

require_once( "extensions/SMWBP/LocalSettings.smwbp.smw.php" );  #SMW only
enableSemantics("http://your.server.name", true);   # you need to update your.server.name with your server name

require_once( "extensions/SMWBP/LocalSettings.smwbp.smwplus.php" );  #SMW+ halo extension
enableSMWHalo();
}}}

*E4*. follow instructions from C4 (initialize SMWPLUS database)

*E5*. append the following line to the end of {{{LocalSettings.php}}}
{{{
require_once( "extensions/SMWBP/LocalSettings.smwbp.ext.php" );  #recommended MW ans SMW extensions
require_once( "extensions/SMWBP/LocalSettings.smwbp.ext.rpi.php" );  #More extensions
}}}

=Update Installed Wiki=
Approach A. update installed component (let's use setup-smwrpi.sh as example)
{{{
./setup-smwrpi.sh update <MY-WIKI-PATH>
}}}

Approach B. update and then install packages newly added to setup script
{{{
./setup-smwrpi.sh update <MY-WIKI-PATH>
./setup-smwrpi.sh install <MY-WIKI-PATH>
}}}

=FAQ=
 * frequent database issues when installing SWM
  * you need to make sure your wiki db user has the following privileges
    * "create,drop" (causing failure in SMW initialization), 
    * "alter" (causing failure in SMW+ initialization)
  * the name of your wiki database should not contain special characters, e.g. 
    * '-' (causing failure in SMW+ initialization)